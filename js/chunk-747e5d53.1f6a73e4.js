(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-747e5d53"],{"1b72":function(t,a,e){"use strict";var s=e("9534"),i=e.n(s);i.a},6536:function(t,a,e){},6654:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t._m(0),e("section",{attrs:{id:"NavSearch"}},[e("div",{staticClass:"container mt-5"},[e("div",{staticClass:"row justify-content-between"},[e("div",{staticClass:"col-md-5"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb",staticStyle:{background:"none"}},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"text-dark",attrs:{to:"/"}},[t._v("首頁")])],1),e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"text-dark",attrs:{to:"/product_list"}},[t._v("購物市集")])],1),""!==t.currentCat?e("li",{staticClass:"breadcrumb-item"},[e("span",{staticClass:"text-primary"},[t._v(t._s(t.currentCat))])]):t._e()])])]),e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"input-group mb-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filterData,expression:"filterData"}],staticClass:"form-control",attrs:{type:"text",placeholder:"搜尋商品","aria-label":"","aria-describedby":"button2"},domProps:{value:t.filterData},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.filterTitle(a)},input:function(a){a.target.composing||(t.filterData=a.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"input-group-text bg-light",attrs:{type:"button",id:"button2"},on:{click:t.filterTitle}},[e("i",{staticClass:"fas fa-search"})])])])])])])]),e("section",{attrs:{id:"CategoryFilter"}},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-2"},[e("div",{staticClass:"sticky-top"},[e("div",{staticClass:"list-group mt-4"},[e("a",{staticClass:"list-group-item list-group-item-action list-group-item-primary",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.filterPro("全部商品")}}},[e("i",{staticClass:"fas fa-align-justify"}),t._v(" 全部商品 ")]),e("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.filterPro("碗盤器皿")}}},[e("i",{staticClass:"fas fa-mortar-pestle"}),t._v(" 碗盤器皿 ")]),e("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.filterPro("杯與壺")}}},[e("i",{staticClass:"fas fa-mug-hot"}),t._v(" 杯與壺 ")]),e("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.filterPro("刀叉匙筷")}}},[e("i",{staticClass:"fas fa-utensil-spoon"}),t._v(" 刀叉匙筷 ")]),e("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.filterPro("料理廚具")}}},[e("i",{staticClass:"fas fa-home"}),t._v(" 料理廚具 ")])])])]),e("div",{staticClass:"col-lg-10 text-dark"},[e("div",{staticClass:"row my-4"},t._l(t.filterProducts,(function(a,s){return e("div",{key:s,staticClass:"col-md-4 mb-4"},[e("div",{staticClass:"card-effect card"},[e("div",{staticClass:"container-img"},[e("div",{staticClass:"l-point productlist-img",style:{backgroundImage:"url("+a.imageUrl+")"},on:{click:function(e){return t.goDetail(a.id)}}})]),e("div",{staticClass:"card-body l-point",on:{click:function(e){return t.goDetail(a.id)}}},[e("span",{staticClass:"badge category-tag mb-2"},[t._v(t._s(a.category))]),e("h5",{staticClass:"card-title"},[e("h5",{staticClass:"text-dark"},[t._v(t._s(a.title))])]),e("p",{staticClass:"card-text"},[t._v(t._s(a.content))]),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[e("del",{staticClass:"origin-price"},[t._v("NT"+t._s(t._f("currency")(a.origin_price)))]),e("div",{staticClass:"now-price"},[t._v("NT"+t._s(t._f("currency")(a.price)))])])]),e("div",{staticClass:"card-footer"},[e("button",{staticClass:"btn btn-bg btn-block ml-auto text-dark",attrs:{type:"button"},on:{click:function(e){return t.addtoCart(a)}}},[t.status.loadingItem===a.id?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),e("i",{staticClass:"fas fa-shopping-bag"}),e("span",[t._v(" 立即選購")])])])])])})),0),"全部商品"===t.currentCat?e("div",{staticClass:"row justify-content-center"},[e("Pagination",{attrs:{pageProps:t.pagination},on:{pagenum_emit:t.getProducts}})],1):t._e()])])])]),e("Shoppingcart")],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"productlist-banner "},[e("div",{staticClass:"dark-overlay d-flex justify-content-center align-items-center"},[e("h1",{staticClass:"banner-title text-center text-light"},[t._v("購 物 市 集")])])])}],r=(e("99af"),e("4de4"),e("c975"),e("e855")),c=e("72a6"),n={components:{Pagination:r["a"],Shoppingcart:c["a"]},data:function(){return{currentCat:"全部商品",Allproducts:[],products:[],filterData:"",filterProducts:[],pagination:{},cart:{},form:{user:{name:"",email:"",tel:"",address:""},message:""},status:{loadingItem:""}}},computed:{},methods:{getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("vincechen","/products?page=").concat(t),e=this;e.$store.dispatch("updateLoading",!0),e.$http.get(a).then((function(t){e.products=t.data.products,e.filterProducts=t.data.products,e.pagination=t.data.pagination,e.$store.dispatch("updateLoading",!1)}))},addtoCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("vincechen","/cart"),s=this;s.$store.dispatch("updateLoading",!0);var i={data:{product_id:t.id,qty:a}};s.$http.post(e,i).then((function(t){s.$bus.$emit("updateCart"),s.$bus.$emit("message:push",t.data.message,"success"),s.$store.dispatch("updateLoading",!1)}))},getAllproducts:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("vincechen","/products/all"),a=this;a.$http.get(t).then((function(t){a.Allproducts=t.data.products}))},filterPro:function(t){var a=this;a.currentCat=t,a.$store.dispatch("updateLoading",!0);var e=[];"全部商品"===t?a.getProducts():(e=a.Allproducts.filter((function(a){return a.category==t})),a.filterProducts=e),a.$store.dispatch("updateLoading",!1)},filterTitle:function(){var t=this;t.filterProducts=t.products.filter((function(a){return a.title.indexOf(t.filterData)>-1})),t.filterData=""},goDetail:function(t){this.$router.push("/product_detail/".concat(t))}},created:function(){this.getProducts(),this.getAllproducts()}},o=n,l=(e("7b61"),e("2877")),u=Object(l["a"])(o,s,i,!1,null,"757c5bdc",null);a["default"]=u.exports},"72a6":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"cart-dropdown"},[s("a",{staticClass:"fixPage",on:{click:function(a){return a.preventDefault(),t.openList()}}},[s("img",{staticClass:"img-fluid",attrs:{src:e("c1c5"),alt:"cart"}}),0==!t.cartNum?s("span",{staticClass:"badge badge-pill"},[t._v(t._s(t.cartNum))]):t._e()]),s("div",{staticClass:"cart-box dropdown-cart-menu",staticStyle:{display:"none"}},[s("div",{staticClass:"row justify-content-center bg-light border rounded py-2"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"dropdown-header"},[s("div",{staticClass:"d-flex justify-content-between"},[s("h4",[t._v("購物車清單")]),s("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.closeList()}}},[s("i",{staticClass:"mt-1 far fa-window-close",staticStyle:{"font-size":"18px"}}),t._v(", ")])])]),s("hr"),0===t.total?s("div",{staticClass:"text-center"},[s("span",{staticClass:"text-danger"},[t._v("～～～您尚未選購商品～～～")]),s("p",{staticClass:"mt-2"},[t._v("優質好物就在眼前，空手而回實在可惜")])]):t._e(),t._l(t.cart.carts,(function(a){return s("div",{key:a.id,staticClass:"dropdown-item d-flex align-items-center"},[s("div",{staticClass:" disabled cart-icon d-flex justify-content-center align-items-center mr-3",on:{"~click":function(e){return t.deleteCartItem(a.id)}}},[t.deleteItem==a.id?s("i",{staticClass:"fas fa-spinner fa-pulse"}):s("i",{staticClass:"fas fa-trash-alt"})]),s("div",{staticClass:"cart-dropdown-item-image bg-cover mr-2",style:{backgroundImage:"url("+a.product.imageUrl+")"}}),s("div",{staticClass:"mr-2"},[s("h6",{staticClass:" mb-0"},[t._v(t._s(a.product.title))]),s("span",[t._v("數量："+t._s(a.qty))])]),s("span",{staticClass:"ml-auto text-success"},[t._v(" "+t._s(t._f("currency")(a.total))+" ")])])})),s("hr"),s("div",{staticClass:"dropdown-item text-right mb-3"},[s("span",{staticClass:"mr-3"},[t._v("總計")]),s("span",{staticClass:"text-success"},[t._v(t._s(t._f("currency")(t.total)))])]),0!==t.total?s("a",{staticClass:"btn btn-secondary btn-block",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.goCheckout(a)}}},[t._v("前往結帳")]):s("a",{staticClass:"btn btn-secondary btn-block",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.closeList()}}},[t._v("繼續逛逛")])],2)])])])])},i=[],r=(e("99af"),e("5530")),c=e("1157"),n=e.n(c),o=e("2f62"),l={data:function(){return{deleteItem:""}},methods:{getCart:function(){this.$store.dispatch("getCart")},deleteCartItem:function(t){var a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("vincechen","/cart/").concat(t);a.deleteItem=t,a.$http.delete(e).then((function(t){t.data.success&&(a.getCart(),a.$bus.$emit("message:push",t.data.message,"danger"),a.deleteItem="")}))},openList:function(){n()(".dropdown-cart-menu").toggle()},closeList:function(){n()(".dropdown-cart-menu").hide()},goCheckout:function(){var t=this;0!==t.cartNum&&t.$router.push("/order_check")}},computed:Object(r["a"])({},Object(o["b"])(["cart","total","cartNum"])),created:function(){this.getCart();var t=this;t.$bus.$on("updateCart",(function(){t.getCart()}))}},u=l,d=(e("1b72"),e("2877")),p=Object(d["a"])(u,s,i,!1,null,"3c330d56",null);a["a"]=p.exports},"7b61":function(t,a,e){"use strict";var s=e("6536"),i=e.n(s);i.a},9534:function(t,a,e){},c1c5:function(t,a,e){t.exports=e.p+"img/1.07c036e3.png"},c975:function(t,a,e){"use strict";var s=e("23e7"),i=e("4d64").indexOf,r=e("a640"),c=e("ae40"),n=[].indexOf,o=!!n&&1/[1].indexOf(1,-0)<0,l=r("indexOf"),u=c("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:o||!l||!u},{indexOf:function(t){return o?n.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},e855:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination "},[e("li",{staticClass:"page-item",class:{disabled:!t.pageProps.has_pre}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.pageEmit(t.pageProps.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pageProps.total_pages,(function(a){return e("li",{key:a,staticClass:"page-item",class:{active:t.pageProps.current_page===a}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.pageEmit(a)}}},[t._v(t._s(a)+" ")])])})),e("li",{staticClass:"page-item ",class:{disabled:!t.pageProps.has_next}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.pageEmit(t.pageProps.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},i=[],r={props:["pageProps"],data:function(){return{}},methods:{pageEmit:function(t){t!==this.pageProps.current_page&&this.$emit("pagenum_emit",t)}}},c=r,n=e("2877"),o=Object(n["a"])(c,s,i,!1,null,null,null);a["a"]=o.exports}}]);
//# sourceMappingURL=chunk-747e5d53.1f6a73e4.js.map